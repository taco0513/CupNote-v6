# 기록 생성 플로우 (Recording Flow)

## 플로우 개요
사용자가 커피 경험을 기록하는 전체 과정의 상세 흐름

## 기록 시작 진입점

### 1. 홈 화면에서
```
홈 화면
  ↓
[+ 새 커피 기록하기] 버튼
  ↓
모드 선택 화면
```

### 2. 빠른 액션에서
```
홈 화면 하단 탭
  ↓
[Cafe] 또는 [HomeCafe] 바로가기
  ↓
해당 모드 직접 시작
```

### 3. 위젯/바로가기에서
```
iOS 위젯 / 앱 바로가기
  ↓
최근 사용 모드로 직접 진입
```

## Cafe Mode 플로우

### 전체 플로우 다이어그램
```
모드 선택
    ↓
커피 정보 입력
    ↓
카페 정보 입력
    ↓
맛 평가
    ↓
최종 검토
    ↓
커뮤니티 매치
    ↓
저장 완료
```

### 단계별 상세 플로우

#### Step 1: 모드 선택
```
사용자 액션: Cafe Mode 선택
시스템 응답: 카페 모드 플로우 시작
진행률: 0% → 16%
```

#### Step 2: 커피 정보
```
필수 입력:
- 커피 이름/메뉴
- 커피 타입 (에스프레소/필터)

선택 입력:
- 원두 정보
- 로스터리
- 가격

유효성 검사:
- 커피 이름 필수
- 가격 숫자만

진행률: 14% → 28%
```

#### Step 3: 카페 정보
```
필수 입력:
- 카페 선택 또는 입력

자동 입력:
- GPS 기반 근처 카페 제안
- 최근 방문 카페 표시

선택 입력:
- 바리스타 이름
- 특이사항

진행률: 28% → 42%
```

#### Step 4: 맛 평가
```
필수 입력:
- 종합 평점 (1-5점)

선택 입력:
- 맛 프로필 (산미/단맛/쓴맛/바디)
- 향미 노트 선택
- 텍스트 설명

인터랙션:
- 슬라이더 조작
- 태그 선택
- 텍스트 입력

진행률: 42% → 66%
```

#### Step 5: 최종 검토
```
입력 요소:
- 사진 추가
- 개인 메모
- 태그 추가
- 공유 설정

검토 사항:
- 입력 내용 확인
- 수정 가능

진행률: 66% → 83%
```

#### Step 6: 커뮤니티 매치
```
시스템 처리:
- 매치 점수 계산
- 커뮤니티 데이터 비교
- 결과 표시

사용자 액션:
- 결과 확인
- 상세 보기 (선택)

진행률: 83% → 100%
```

## HomeCafe Mode 플로우

### 전체 플로우 다이어그램
```
원두 정보
    ↓
레시피 설정
    ↓
추출 진행 (타이머)
    ↓
테이스팅 평가
    ↓
최종 정리
    ↓
저장 완료
```

### 단계별 상세 플로우

#### Step 1: 원두 정보
```
필수 입력:
- 원두 이름
- 로스팅 날짜

선택 입력:
- 로스터리
- 원산지
- 가공 방식
- 구매 정보

라이브러리:
- 이전 원두 재사용
- 즐겨찾기 원두

진행률: 0% → 20%
```

#### Step 2: 레시피 설정
```
필수 입력:
- 추출 도구
- 원두량 (g)
- 물의 양 (ml)

선택 입력:
- 물 온도
- 분쇄도
- 푸어링 단계

레시피 관리:
- 기존 레시피 불러오기
- 새 레시피 저장

진행률: 20% → 40%
```

#### Step 3: 추출 진행
```
타이머 기능:
- 시작/정지/재시작
- 단계별 가이드
- 랩타임 기록

실시간 입력:
- 추출량 기록
- 관찰 메모
- 문제 체크

미디어:
- 사진 촬영
- 동영상 녹화

진행률: 40% → 60%
```

#### Step 4: 테이스팅
```
필수 입력:
- 종합 평점

평가 항목:
- 맛 프로필
- 향미 노트
- 추출 평가
- 온도별 변화

개선 메모:
- 다음 개선점
- 레시피 피드백

진행률: 60% → 80%
```

#### Step 5: 최종 정리
```
추가 정보:
- 날씨 (자동)
- 함께한 사람
- 페어링
- 개인 메모
- 태그

저장 옵션:
- 레시피 저장
- 공유 설정
- 커뮤니티 공유

진행률: 80% → 100%
```

## 분기 처리

### 조건부 플로우
```
IF 첫 기록 THEN
  → 추가 가이드 표시
  → 툴팁 활성화

IF 반복 기록 THEN
  → 이전 데이터 제안
  → 빠른 입력 모드

IF 오프라인 THEN
  → 로컬 저장
  → 동기화 대기열
```

### 이탈 처리
```
뒤로 가기:
- 입력 내용 임시 저장
- 이탈 확인 다이얼로그

앱 종료:
- 자동 저장 (Draft)
- 재진입 시 복구

타임아웃:
- 30분 후 세션 종료
- 자동 저장
```

## 플로우 최적화

### 스마트 기본값
- 최근 사용 값 제안
- 시간대별 추천
- 위치 기반 자동완성

### 단축 경로
```
파워 유저:
- 최근 기록 복사
- 템플릿 사용
- 음성 입력

빠른 기록:
- 필수 항목만
- 나중에 수정
- 일괄 입력
```

### 적응형 플로우
```
초보자:
- 상세 가이드
- 예시 제공
- 용어 설명

숙련자:
- 최소 UI
- 키보드 단축키
- 배치 모드
```

## 완료 후 액션

### 즉시 액션
```
저장 완료
    ↓
성취 확인
    ↓
공유 옵션 제시
    ↓
다음 액션 선택:
- 홈으로
- 새 기록
- 상세 보기
- 커뮤니티
```

### 후속 액션
```
24시간 후:
- 리마인더 (연속 기록)
- 추천 (비슷한 커피)

1주일 후:
- 주간 요약
- 패턴 분석
```

## 성능 목표

### 완료 시간
- Cafe Mode: 5-7분
- HomeCafe Mode: 8-12분
- 빠른 기록: <3분

### 이탈률
- 각 단계: <10%
- 전체 완료율: >70%

### 만족도
- 플로우 평점: 4.0+
- 재사용 의향: 80%+