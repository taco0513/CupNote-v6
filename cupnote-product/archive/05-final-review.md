# Cafe Mode - 화면 5: 최종 리뷰

## 화면 개요
전체 경험을 종합하고 최종 평점을 매기는 화면 (Cafe Mode 5/6 단계)

## 화면 구성

### 헤더
```
[←] 최종 리뷰                   (5/6)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```
- 진행률: 83% 완료

### 종합 평점

```
┌─────────────────────────────────┐
│      오늘의 커피 경험 평점        │
│                                 │
│        ⭐ ⭐ ⭐ ⭐ ☆           │
│          4.0 / 5.0              │
│                                 │
│    [1]  [2]  [3]  [4]  [5]      │
│   최악  별로  보통  좋음  최고    │
│                                 │
│   탭하여 평점을 선택하세요        │
└─────────────────────────────────┘
```

### 사진 추가

```
┌─────────────────────────────────┐
│       📸 사진 추가 (선택)        │
│                                 │
│  ┌────┐ ┌────┐ ┌────┐          │
│  │ 📷 │ │    │ │    │          │
│  │추가 │ │    │ │    │          │
│  └────┘ └────┘ └────┘          │
│                                 │
│  최대 5장까지 추가 가능          │
│                                 │
│  [카메라] [갤러리] [건너뛰기]    │
└─────────────────────────────────┘
```

### 한 줄 평

```
┌─────────────────────────────────┐
│     오늘의 커피를 한 줄로?       │
│ ┌───────────────────────────┐   │
│ │ 기대 이상의 산미와 달콤함   │   │
│ └───────────────────────────┘   │
│                                 │
│ 추천: "완벽한 아침", "또 오고파" │
└─────────────────────────────────┘
```

### 개인 메모 (선택)

```
┌─────────────────────────────────┐
│      📝 개인 메모 (비공개)       │
│ ┌───────────────────────────┐   │
│ │ 다음에는 아이스로 마셔보기. │   │
│ │ 디저트는 크로플이 잘 어울림.│   │
│ │ 2시쯤이 사람이 적어서 좋음. │   │
│ └───────────────────────────┘   │
│                                 │
│ 💡 나만 볼 수 있는 메모입니다     │
└─────────────────────────────────┘
```

### 태그 추가

```
┌─────────────────────────────────┐
│         # 태그 추가              │
│                                 │
│ 추천 태그:                       │
│ [#데이트] [#작업] [#브런치]      │
│ [#조용한] [#뷰맛집] [#디저트]    │
│                                 │
│ 내 태그:                         │
│ #데이트 #뷰맛집 #재방문          │
│                                 │
│ + 커스텀 태그 추가               │
└─────────────────────────────────┘
```

### 요약 미리보기

```
┌─────────────────────────────────┐
│       📋 기록 요약               │
├─────────────────────────────────┤
│ ☕ 에티오피아 예가체페           │
│ 📍 블루보틀 성수                 │
│ 📅 2025.08.07 오후              │
│ ⭐ 4.0 / 5.0                    │
│                                 │
│ 맛: 딸기, 초콜릿, 꽃향           │
│ 분위기: 모던, 조용함             │
│ 태그: #데이트 #뷰맛집            │
└─────────────────────────────────┘
```

### 공유 설정

```
┌─────────────────────────────────┐
│      공개 범위 설정              │
│                                 │
│ ○ 공개 (커뮤니티와 공유)        │
│ ● 친구만                        │
│ ○ 나만 보기                     │
│                                 │
│ 공유 항목:                       │
│ ☑ 평점  ☑ 맛 노트  ☑ 사진      │
│ ☐ 카페  ☐ 가격  ☐ 메모         │
└─────────────────────────────────┘
```

### 하단 액션

```
┌─────────────────────────────────┐
│                                 │
│      [임시 저장]   [저장 →]      │
│                  커뮤니티 매치    │
└─────────────────────────────────┘
```

## 사진 처리

### 업로드 프로세스
1. 선택/촬영
2. 자동 압축 (최대 1MB)
3. 썸네일 생성
4. 클라우드 업로드
5. CDN 배포

### 이미지 최적화
```javascript
{
  original: "원본 보관",
  display: "1080x1080 리사이즈",
  thumbnail: "300x300 썸네일",
  format: "WebP 변환",
  quality: 85
}
```

### 편집 기능
- 크롭
- 필터 (5종)
- 밝기/대비 조절
- 회전

## 데이터 저장

### 저장 데이터
```javascript
{
  // 기본 정보
  coffeeId: "uuid",
  userId: "user-id",
  timestamp: "2025-08-07T14:30:00Z",
  
  // 커피 정보
  coffee: {
    name: "에티오피아 예가체페",
    roastery: "블루보틀",
    origin: "Ethiopia"
  },
  
  // 평가
  rating: 4.0,
  taste: {
    notes: ["딸기", "초콜릿", "꽃향"],
    description: "기대 이상의 산미와 달콤함"
  },
  
  // 미디어
  images: ["url1", "url2"],
  
  // 메타데이터
  tags: ["데이트", "뷰맛집"],
  privacy: "friends",
  memo: "비공개 메모 내용"
}
```

### 저장 옵션
- **저장**: 완료 후 커뮤니티 매치
- **임시 저장**: 나중에 이어서
- **취소**: 데이터 삭제 확인

## 검증 및 확인

### 필수 항목 체크
- 평점 (1-5)
- 최소 1개 이상 정보

### 저장 전 확인
```
┌─────────────────────────────────┐
│       저장하시겠습니까?          │
│                                 │
│ 커뮤니티와 공유되며              │
│ 매치 점수가 계산됩니다.          │
│                                 │
│    [취소]        [저장]          │
└─────────────────────────────────┘
```

## 저장 후 프로세스

### 즉시 처리
1. 데이터베이스 저장
2. 이미지 업로드
3. 포인트 적립
4. 성취 체크

### 비동기 처리
1. 커뮤니티 매치 계산
2. 통계 업데이트
3. 추천 시스템 학습
4. 알림 발송

## 성공 피드백

```
┌─────────────────────────────────┐
│         ✅ 저장 완료!            │
│                                 │
│      +10 포인트 획득             │
│   커뮤니티 매치 확인하기 →       │
└─────────────────────────────────┘
```

## 오류 처리

### 네트워크 오류
- 로컬 저장
- 재시도 옵션
- 오프라인 모드

### 저장 실패
- 오류 메시지
- 복구 옵션
- 지원 연결