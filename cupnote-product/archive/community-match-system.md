# 커뮤니티 매치 시스템 (Community Match System)

## 시스템 개요
같은 커피를 마신 사용자들의 평가를 비교하고 매칭률을 계산하는 소셜 기능

## 핵심 개념

### 매치 점수 (Match Score)
사용자의 커피 평가가 커뮤니티 평균과 얼마나 일치하는지 나타내는 점수 (0-100%)

### 커뮤니티 데이터
같은 원두/카페/메뉴를 경험한 다른 사용자들의 집합 데이터

## 매칭 프로세스

### 1. 데이터 수집
```
사용자 기록 완료
    ↓
커피 정보 추출
(원두, 카페, 메뉴)
    ↓
커뮤니티 데이터 검색
    ↓
매칭 계산
```

### 2. 매칭 기준
- **Cafe Mode**: 카페 + 메뉴 조합
- **HomeCafe Mode**: 원두 + 로스터리 조합

## 매치 화면

### 매치 결과 표시
```
┌─────────────────────────────────┐
│ 🤝 커뮤니티 매치                │
│                                 │
│    에티오피아 예가체페 G1        │
│     블루보틀 성수점              │
│                                 │
│      매치율: 85%                │
│    ████████████░░               │
│                                 │
│ 커뮤니티와 비슷한 느낌이에요!    │
└─────────────────────────────────┘
```

### 상세 비교
```
┌─────────────────────────────────┐
│ 📊 상세 비교                    │
│                                 │
│         나  vs  커뮤니티         │
│ 평점:   4.0     4.2             │
│ 산미:   높음    높음            │
│ 단맛:   중간    높음            │
│ 바디:   가벼움  중간            │
│                                 │
│ 공통 키워드:                    │
│ • 과일향 (87%)                  │
│ • 깔끔한 (65%)                  │
│ • 산미 (72%)                    │
└─────────────────────────────────┘
```

## 매치 점수 계산

### 점수 구성 요소
```
전체 매치 점수 (100%)
├── 평점 일치도 (40%)
├── 맛 프로필 유사도 (30%)
├── 키워드 일치도 (20%)
└── 추출 방법 일치도 (10%)
```

### 계산 알고리즘
```javascript
// 평점 일치도
평점차이 = |내평점 - 커뮤니티평균|
평점점수 = (5 - 평점차이) / 5 * 40

// 맛 프로필 유사도
프로필점수 = 일치항목수 / 전체항목수 * 30

// 키워드 일치도
키워드점수 = 공통키워드수 / 전체키워드수 * 20

// 최종 점수
매치점수 = 평점점수 + 프로필점수 + 키워드점수 + 기타점수
```

## 매치 레벨

### 점수별 메시지
```
90-100%: "완벽한 매치! 전문가 수준이에요 🏆"
80-89%: "훌륭해요! 커뮤니티와 비슷한 느낌 👍"
70-79%: "좋아요! 나만의 개성이 있네요 😊"
60-69%: "독특한 관점이 있으시네요 🎨"
0-59%: "새로운 시각을 가지고 계시네요 💡"
```

### 특별 상황
```
첫 번째 기록자:
"🌟 첫 번째 탐험자!
이 커피를 처음 기록하셨어요.
당신이 기준이 됩니다!"
```

## 커뮤니티 인사이트

### 통계 정보
```
┌─────────────────────────────────┐
│ 📈 커뮤니티 통계                │
│                                 │
│ 총 12명이 이 커피를 마셨어요    │
│                                 │
│ 평균 평점: ⭐ 4.2 / 5.0        │
│ 만족도: 85%                     │
│                                 │
│ 평점 분포:                      │
│ 5점 ████ 4명                   │
│ 4점 ██████ 6명                 │
│ 3점 ██ 2명                     │
│                                 │
│ 주요 특징:                      │
│ • 과일향 (9명)                  │
│ • 밝은 산미 (7명)               │
│ • 깔끔한 후미 (6명)             │
└─────────────────────────────────┘
```

### 리뷰 하이라이트
```
┌─────────────────────────────────┐
│ 💬 다른 사람들의 느낌           │
│                                 │
│ @coffee_master (92% 매치)       │
│ "블루베리 폭탄! 예가체페 중     │
│  최고였어요"                    │
│                                 │
│ @daily_brew (88% 매치)         │
│ "산미가 정말 밝고 깨끗해요"     │
│                                 │
│ @bean_hunter (85% 매치)        │
│ "과일 주스 같은 느낌"           │
│                                 │
│ [더 보기]                       │
└─────────────────────────────────┘
```

## 매치 기반 추천

### 비슷한 커피 추천
```
┌─────────────────────────────────┐
│ 🎯 이런 커피는 어때요?          │
│                                 │
│ 높은 매치율 기반 추천:          │
│                                 │
│ • 케냐 AA (예상 매치 87%)       │
│   비슷한 과일향과 산미          │
│                                 │
│ • 콜롬비아 게이샤 (예상 85%)    │
│   깔끔하고 플로럴한 특징        │
│                                 │
│ [추천 이유] [더 보기]           │
└─────────────────────────────────┘
```

### 매치 친구 찾기
```
┌─────────────────────────────────┐
│ 👥 취향이 비슷한 사람들         │
│                                 │
│ @coffee_twin (평균 매치 91%)    │
│ 23개 공통 커피 | 팔로우하기     │
│                                 │
│ @taste_buddy (평균 매치 88%)    │
│ 18개 공통 커피 | 팔로우하기     │
│                                 │
│ [전체 보기]                     │
└─────────────────────────────────┘
```

## 게이미피케이션

### 매치 관련 성취
```
🏆 매치 마스터: 90% 이상 매치 10회
🎯 정확한 입맛: 85% 이상 매치 20회
👥 커뮤니티 리더: 첫 기록 10회
🌟 트렌드세터: 독특한 평가 10회
```

### 매치 스트릭
```
┌─────────────────────────────────┐
│ 🔥 매치 스트릭                  │
│                                 │
│ 5일 연속 80% 이상!              │
│ ████████████████                │
│                                 │
│ 보상: +50 포인트                │
└─────────────────────────────────┘
```

## 프라이버시 설정

### 공개 범위
```
내 매치 결과 공개:
○ 전체 공개
● 팔로워만
○ 나만 보기

내 리뷰 표시:
☑ 닉네임 표시
☐ 익명으로 표시
```

## 데이터 품질 관리

### 신뢰도 시스템
- 최소 3명 이상 기록 시 매치 점수 표시
- 10명 이상 시 "신뢰할 수 있는 데이터" 마크
- 이상치 자동 필터링

### 가중치 적용
- 레벨 높은 사용자 의견 가중치 증가
- 최근 기록 높은 가중치
- 상세 기록 높은 가중치

## 기술적 특징

### 실시간 업데이트
- 새 기록 추가 시 즉시 반영
- 웹소켓 기반 실시간 동기화

### 캐싱 전략
- 인기 커피 데이터 사전 캐싱
- 개인 매치 히스토리 로컬 저장

### 성능 최적화
- 점진적 데이터 로딩
- 백그라운드 매치 계산
- CDN 활용